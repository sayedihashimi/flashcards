@page "/"
@using SayedHa.Flashcards.Shared
@inject HttpClient Http
@inject FlashcardWeb FlashcardWeb

@if(currentFlashcard != null){
    <FlashcardView Text="@currentFlashcard.Text" ImageUrl = "@currentFlashcard.ImageUrl" />
}
else{
    <p class="loading"></p>
}

@if(FlashcardWeb == null){
    <h1>flashcardweb null</h1>
}

@code{
    List<Flashcard> Flashcards = null;
    int currentIndex = 0;
    Flashcard currentFlashcard = null;

    protected async Task<List<SayedHa.Flashcards.Shared.Flashcard>> GetFlashcards() => await FlashcardWeb.GetFlashcardsAsync("samay");

    protected override async Task OnInitializedAsync() {
#if DEBUG
    await Task.Delay(10000);
#endif

        if(FlashcardWeb != null) {
            Flashcards = await GetFlashcards();
            if (Flashcards != null && Flashcards.Count > 0) {
                currentFlashcard = Flashcards[currentIndex];
            }
            else {
                Console.WriteLine("Flashcards null");
            }    
        }
    }
}